# PID

Proportional-Integral-Derivative Controller

根据 误差(Error)反馈 来 修正控制量

$$
u(t) = K_p e(t) + K_i \int_0^t e(\tau) d\tau + K_d \frac{de(t)}{dt}
$$
1. $u(t)$ : 控制器输出
2. $e(t)$ : 控制误差(目标值 - 当前值)
3. $K_p$  : 比例Gain
   1. 根据当前误差大小直接施加控制
4. $K_i$  : 积分Gain
   1. 累积过去的误差(积分历史)来补偿
   2. 消除稳态误差
5. $K_d$  : 微分Gain
   1. 预测未来误差变化趋势(看误差变化速率)
   2. 提前刹车，减少超调、减少振荡，提升系统稳定性


调参
1. 手动分步调参(先控制振荡，再慢慢补偿误差)
   1. 只开 P，关掉 I & D，找一个临界P，能快速收敛，但不振荡太厉害
   2. 加一点 D，抑制振荡
   3. 最后加 I，消除长期稳态误差
2. Ziegler–Nichols 方法自动调 PID
   1. 先找到让系统刚好开始振荡的比例增益
   2. 用经验公式直接算出 P、I、D 的参数




## Double PID


倒立摆
1. 主PID : 控制杆子的角度 θ 竖直
2. 副PID : 控制小车的位置 x 停在目标点附近

把两个 PID 控制信号加权合成成一个总控制力
