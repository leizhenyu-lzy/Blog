# FreeRTOS

## Table of Contents

[toc]

## Portals

[韦东山 FreeRTOS的内部机制](https://www.bilibili.com/video/BV1Ar4y1C7En)

[华清创客学院 FreeRTOS开发](https://www.bilibili.com/video/BV1864y1T7Z7)

[硬件家园 FreeRTOS实时操作系统](https://www.bilibili.com/video/BV18R4y147DB)

# 硬件家园 FreeRTOS实时操作系统

## 第一讲

### FreeRTOS简介

嵌入式操作系统与计算机操作系统

分类：
1. 对外部事件的响应能力分类
   1. 实时操作系统：能够即时响应外部事件请求，能控制所有实时设备和实时任务协调运行，且能在规定时间内完成对事件的处理（对时间有要求）
   2. 分时操作系统：时间片轮转完成各个任务，任务没有优先级
2. 按时间的严格程度分类实时操作系统
   1. 强实时操作系统：在极其严格的时间内按完成任务
   2. 弱实时操作系统：没有那么严格的要求

FreeRTOS优点：开源免费、移植简单（添加源码文件、宏定义）

FreeRTOS特点
1. 支持抢占式调度、合作式调度、时间片调度
2. 典型内核大小使用在4-9k
3. 支持消息队列、二值信号量、计数信号量、递归信号量、互斥信号量、事件通知
4. 高效软件定时器
5. 跟踪执行函数
6. 多个任务可以分配相同优先级，支持时间片调度
7. 任务优先级数量不限

### 裸机系统与多任务系统

裸机系统：裸机编程时，线初始化相关硬件，然后让主程序在死循环中顺序处理各种事件。对于紧急事件采用中断函数进行快速响应。

多任务系统的事件处理在任务中完成，同样采用中断功能进行快速响应。多任务系统通常包含多个任务，彼此独立，方便编程。任务具有优先级，高优先级任务可以打断低优先级任务，提高实时性。

开启任务调度，不再死循环。引入操作系统后，编程时不需要精心设计程序执行流，任务间不存在干扰。
```c
#include <头文件>
// 变量定义

int main()
{
    // 硬件初始化
    Hardware_Init();
    // FreeRTOS初始化
    FreeRTOS_Init();
    // FreeRTOS启动，开启任务调度，不再返回
    FreeRTOS_Start();
}
```

裸机系统的事件处理在主函数中（实时响应，轮询处理），而多任务系统分成一个个任务（实时响应，实时处理）。



## FreeRTOS任务

## 数据结构

## 动态内存管理

## 应用



# 华清创客学院 FreeRTOS开发

## 物联网操作系统简介

**主流物联网操作系统**

Ucosii&Ucosiii
FreeRTOS（被亚马逊收购）
VxWork
AliOS
Huawei LiteOS
RT-Thread

**开发环境搭建**

STM32CubeMX
Keil
CH340 
ST-Link

**前后台代码结构**

中断要快进快出，使得程序效率更高

问题：实时性不能保证、CPU利用率不高、代码结构复杂（中断flag较多）

**RTOS**

RTOS:Real Time OS，实时操作系统

硬实时：在规定的时间内必须完成操作，不允许超时。
软实时：处理过程超时没有那么严格

实时性：在固定事件对事件进行响应

操作系统提供任务管理和协调控制，功能可裁剪、代码可移植（相同的代码编译后烧写在不同开发板上）

RTOS核心：任务调度

交互组件

任务优先级

**RTOS通用组件**

资源访问控制
1. 信号量
2. 互斥锁
3. 临界区

消息通信
1. 消息队列
2. 事件标志

存储管理
1. 存储块







## 多任务基础

## 多任务调度原理

## 消息队列

## 软件定时器






# 韦东山 FreeRTOS的内部机制

## 01 RTOS简介

**任务**（运行起来的函数）
1. 一段代码
2. 运行位置
3. 运行环境

可以记录程序执行位置、暂停、恢复


## 02

## 03

## 04

## 05

## 06

## 07



